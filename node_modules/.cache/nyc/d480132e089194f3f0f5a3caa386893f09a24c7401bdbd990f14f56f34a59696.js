'use strict';var cov_fglcscg67=function(){var path="/home/ngabonziza/Desktop/camp6/Quick-credit/server/controllers/loan/applyLoan.js";var hash="8812f7984e02bae138d9a837a9908e416075fc2c";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/ngabonziza/Desktop/camp6/Quick-credit/server/controllers/loan/applyLoan.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:7,column:19},end:{line:7,column:563}},"2":{start:{line:7,column:76},end:{line:7,column:347}},"3":{start:{line:7,column:89},end:{line:7,column:90}},"4":{start:{line:7,column:134},end:{line:7,column:142}},"5":{start:{line:7,column:144},end:{line:7,column:199}},"6":{start:{line:7,column:200},end:{line:7,column:231}},"7":{start:{line:7,column:232},end:{line:7,column:286}},"8":{start:{line:7,column:259},end:{line:7,column:286}},"9":{start:{line:7,column:287},end:{line:7,column:345}},"10":{start:{line:7,column:350},end:{line:7,column:559}},"11":{start:{line:7,column:407},end:{line:7,column:475}},"12":{start:{line:7,column:423},end:{line:7,column:475}},"13":{start:{line:7,column:476},end:{line:7,column:536}},"14":{start:{line:7,column:493},end:{line:7,column:536}},"15":{start:{line:7,column:537},end:{line:7,column:556}},"16":{start:{line:9,column:14},end:{line:9,column:44}},"17":{start:{line:11,column:15},end:{line:11,column:46}},"18":{start:{line:13,column:11},end:{line:13,column:25}},"19":{start:{line:15,column:12},end:{line:15,column:40}},"20":{start:{line:17,column:14},end:{line:17,column:31}},"21":{start:{line:19,column:15},end:{line:19,column:46}},"22":{start:{line:21,column:39},end:{line:21,column:93}},"23":{start:{line:23,column:33},end:{line:23,column:456}},"24":{start:{line:23,column:64},end:{line:23,column:89}},"25":{start:{line:23,column:91},end:{line:23,column:453}},"26":{start:{line:23,column:165},end:{line:23,column:263}},"27":{start:{line:23,column:182},end:{line:23,column:195}},"28":{start:{line:23,column:209},end:{line:23,column:219}},"29":{start:{line:23,column:239},end:{line:23,column:253}},"30":{start:{line:23,column:254},end:{line:23,column:261}},"31":{start:{line:23,column:264},end:{line:23,column:426}},"32":{start:{line:23,column:281},end:{line:23,column:296}},"33":{start:{line:23,column:306},end:{line:23,column:424}},"34":{start:{line:23,column:360},end:{line:23,column:380}},"35":{start:{line:23,column:401},end:{line:23,column:420}},"36":{start:{line:23,column:429},end:{line:23,column:449}},"37":{start:{line:25,column:50},end:{line:25,column:151}},"38":{start:{line:25,column:92},end:{line:25,column:149}},"39":{start:{line:27,column:16},end:{line:111,column:3}},"40":{start:{line:29,column:8},end:{line:29,column:41}},"41":{start:{line:32,column:4},end:{line:108,column:8}},"42":{start:{line:35,column:23},end:{line:100,column:15}},"43":{start:{line:38,column:16},end:{line:99,column:34}},"44":{start:{line:39,column:20},end:{line:98,column:21}},"45":{start:{line:40,column:24},end:{line:97,column:25}},"46":{start:{line:42,column:32},end:{line:46,column:34}},"47":{start:{line:47,column:32},end:{line:47,column:82}},"48":{start:{line:49,column:32},end:{line:52,column:33}},"49":{start:{line:50,column:36},end:{line:50,column:54}},"50":{start:{line:51,column:36},end:{line:51,column:42}},"51":{start:{line:54,column:32},end:{line:54,column:120}},"52":{start:{line:57,column:32},end:{line:57,column:130}},"53":{start:{line:58,column:32},end:{line:58,column:65}},"54":{start:{line:59,column:32},end:{line:59,column:82}},"55":{start:{line:60,column:32},end:{line:60,column:145}},"56":{start:{line:61,column:32},end:{line:61,column:74}},"57":{start:{line:62,column:32},end:{line:72,column:34}},"58":{start:{line:74,column:32},end:{line:79,column:33}},"59":{start:{line:75,column:36},end:{line:75,column:64}},"60":{start:{line:77,column:36},end:{line:77,column:55}},"61":{start:{line:78,column:36},end:{line:78,column:42}},"62":{start:{line:81,column:32},end:{line:84,column:36}},"63":{start:{line:87,column:32},end:{line:87,column:60}},"64":{start:{line:88,column:32},end:{line:92,column:36}},"65":{start:{line:96,column:32},end:{line:96,column:55}},"66":{start:{line:103,column:16},end:{line:103,column:51}},"67":{start:{line:106,column:12},end:{line:106,column:29}},"68":{start:{line:110,column:4},end:{line:110,column:21}},"69":{start:{line:113,column:16},end:{line:113,column:31}},"70":{start:{line:114,column:0},end:{line:114,column:28}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:31},end:{line:7,column:561}},line:7},"1":{name:"defineProperties",decl:{start:{line:7,column:42},end:{line:7,column:58}},loc:{start:{line:7,column:74},end:{line:7,column:349}},line:7},"2":{name:"(anonymous_2)",decl:{start:{line:7,column:357},end:{line:7,column:358}},loc:{start:{line:7,column:405},end:{line:7,column:558}},line:7},"3":{name:"_interopRequireDefault",decl:{start:{line:21,column:9},end:{line:21,column:31}},loc:{start:{line:21,column:37},end:{line:21,column:95}},line:21},"4":{name:"_asyncToGenerator",decl:{start:{line:23,column:9},end:{line:23,column:26}},loc:{start:{line:23,column:31},end:{line:23,column:458}},line:23},"5":{name:"(anonymous_5)",decl:{start:{line:23,column:40},end:{line:23,column:41}},loc:{start:{line:23,column:52},end:{line:23,column:455}},line:23},"6":{name:"(anonymous_6)",decl:{start:{line:23,column:110},end:{line:23,column:111}},loc:{start:{line:23,column:137},end:{line:23,column:451}},line:23},"7":{name:"step",decl:{start:{line:23,column:148},end:{line:23,column:152}},loc:{start:{line:23,column:163},end:{line:23,column:428}},line:23},"8":{name:"(anonymous_8)",decl:{start:{line:23,column:341},end:{line:23,column:342}},loc:{start:{line:23,column:358},end:{line:23,column:382}},line:23},"9":{name:"(anonymous_9)",decl:{start:{line:23,column:384},end:{line:23,column:385}},loc:{start:{line:23,column:399},end:{line:23,column:422}},line:23},"10":{name:"_classCallCheck",decl:{start:{line:25,column:9},end:{line:25,column:24}},loc:{start:{line:25,column:48},end:{line:25,column:153}},line:25},"11":{name:"(anonymous_11)",decl:{start:{line:27,column:16},end:{line:27,column:17}},loc:{start:{line:27,column:28},end:{line:111,column:1}},line:27},"12":{name:"ApplyLoan",decl:{start:{line:28,column:13},end:{line:28,column:22}},loc:{start:{line:28,column:25},end:{line:30,column:5}},line:28},"13":{name:"(anonymous_13)",decl:{start:{line:34,column:15},end:{line:34,column:16}},loc:{start:{line:34,column:27},end:{line:107,column:9}},line:34},"14":{name:"_callee",decl:{start:{line:35,column:88},end:{line:35,column:95}},loc:{start:{line:35,column:106},end:{line:100,column:13}},line:35},"15":{name:"_callee$",decl:{start:{line:38,column:56},end:{line:38,column:64}},loc:{start:{line:38,column:75},end:{line:99,column:17}},line:38},"16":{name:"(anonymous_16)",decl:{start:{line:74,column:59},end:{line:74,column:60}},loc:{start:{line:74,column:75},end:{line:76,column:33}},line:74},"17":{name:"loanApply",decl:{start:{line:102,column:21},end:{line:102,column:30}},loc:{start:{line:102,column:40},end:{line:104,column:13}},line:102}},branchMap:{"0":{loc:{start:{line:7,column:168},end:{line:7,column:198}},type:"binary-expr",locations:[{start:{line:7,column:168},end:{line:7,column:189}},{start:{line:7,column:193},end:{line:7,column:198}}],line:7},"1":{loc:{start:{line:7,column:232},end:{line:7,column:286}},type:"if",locations:[{start:{line:7,column:232},end:{line:7,column:286}},{start:{line:7,column:232},end:{line:7,column:286}}],line:7},"2":{loc:{start:{line:7,column:407},end:{line:7,column:475}},type:"if",locations:[{start:{line:7,column:407},end:{line:7,column:475}},{start:{line:7,column:407},end:{line:7,column:475}}],line:7},"3":{loc:{start:{line:7,column:476},end:{line:7,column:536}},type:"if",locations:[{start:{line:7,column:476},end:{line:7,column:536}},{start:{line:7,column:476},end:{line:7,column:536}}],line:7},"4":{loc:{start:{line:21,column:46},end:{line:21,column:92}},type:"cond-expr",locations:[{start:{line:21,column:70},end:{line:21,column:73}},{start:{line:21,column:76},end:{line:21,column:92}}],line:21},"5":{loc:{start:{line:21,column:46},end:{line:21,column:67}},type:"binary-expr",locations:[{start:{line:21,column:46},end:{line:21,column:49}},{start:{line:21,column:53},end:{line:21,column:67}}],line:21},"6":{loc:{start:{line:23,column:264},end:{line:23,column:426}},type:"if",locations:[{start:{line:23,column:264},end:{line:23,column:426}},{start:{line:23,column:264},end:{line:23,column:426}}],line:23},"7":{loc:{start:{line:25,column:50},end:{line:25,column:151}},type:"if",locations:[{start:{line:25,column:50},end:{line:25,column:151}},{start:{line:25,column:50},end:{line:25,column:151}}],line:25},"8":{loc:{start:{line:40,column:24},end:{line:97,column:25}},type:"switch",locations:[{start:{line:41,column:28},end:{line:54,column:120}},{start:{line:56,column:28},end:{line:84,column:36}},{start:{line:86,column:28},end:{line:92,column:36}},{start:{line:94,column:28},end:{line:94,column:36}},{start:{line:95,column:28},end:{line:96,column:55}}],line:40},"9":{loc:{start:{line:49,column:32},end:{line:52,column:33}},type:"if",locations:[{start:{line:49,column:32},end:{line:52,column:33}},{start:{line:49,column:32},end:{line:52,column:33}}],line:49},"10":{loc:{start:{line:74,column:32},end:{line:79,column:33}},type:"if",locations:[{start:{line:74,column:32},end:{line:79,column:33}},{start:{line:74,column:32},end:{line:79,column:33}}],line:74}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0,0,0,0],"9":[0,0],"10":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"8812f7984e02bae138d9a837a9908e416075fc2c"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();cov_fglcscg67.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});var _createClass=(cov_fglcscg67.s[1]++,function(){cov_fglcscg67.f[0]++;function defineProperties(target,props){cov_fglcscg67.f[1]++;cov_fglcscg67.s[2]++;for(var i=(cov_fglcscg67.s[3]++,0);i<props.length;i++){var descriptor=(cov_fglcscg67.s[4]++,props[i]);cov_fglcscg67.s[5]++;descriptor.enumerable=(cov_fglcscg67.b[0][0]++,descriptor.enumerable)||(cov_fglcscg67.b[0][1]++,false);cov_fglcscg67.s[6]++;descriptor.configurable=true;cov_fglcscg67.s[7]++;if("value"in descriptor){cov_fglcscg67.b[1][0]++;cov_fglcscg67.s[8]++;descriptor.writable=true;}else{cov_fglcscg67.b[1][1]++;}cov_fglcscg67.s[9]++;Object.defineProperty(target,descriptor.key,descriptor);}}cov_fglcscg67.s[10]++;return function(Constructor,protoProps,staticProps){cov_fglcscg67.f[2]++;cov_fglcscg67.s[11]++;if(protoProps){cov_fglcscg67.b[2][0]++;cov_fglcscg67.s[12]++;defineProperties(Constructor.prototype,protoProps);}else{cov_fglcscg67.b[2][1]++;}cov_fglcscg67.s[13]++;if(staticProps){cov_fglcscg67.b[3][0]++;cov_fglcscg67.s[14]++;defineProperties(Constructor,staticProps);}else{cov_fglcscg67.b[3][1]++;}cov_fglcscg67.s[15]++;return Constructor;};}());var _loanDb=(cov_fglcscg67.s[16]++,require('../../models/loanDb'));var _loanDb2=(cov_fglcscg67.s[17]++,_interopRequireDefault(_loanDb));var _joi=(cov_fglcscg67.s[18]++,require('joi'));var _joi2=(cov_fglcscg67.s[19]++,_interopRequireDefault(_joi));var _moment=(cov_fglcscg67.s[20]++,require('moment'));var _moment2=(cov_fglcscg67.s[21]++,_interopRequireDefault(_moment));function _interopRequireDefault(obj){cov_fglcscg67.f[3]++;cov_fglcscg67.s[22]++;return(cov_fglcscg67.b[5][0]++,obj)&&(cov_fglcscg67.b[5][1]++,obj.__esModule)?(cov_fglcscg67.b[4][0]++,obj):(cov_fglcscg67.b[4][1]++,{default:obj});}function _asyncToGenerator(fn){cov_fglcscg67.f[4]++;cov_fglcscg67.s[23]++;return function(){cov_fglcscg67.f[5]++;var gen=(cov_fglcscg67.s[24]++,fn.apply(this,arguments));cov_fglcscg67.s[25]++;return new Promise(function(resolve,reject){cov_fglcscg67.f[6]++;function step(key,arg){cov_fglcscg67.f[7]++;cov_fglcscg67.s[26]++;try{var info=(cov_fglcscg67.s[27]++,gen[key](arg));var value=(cov_fglcscg67.s[28]++,info.value);}catch(error){cov_fglcscg67.s[29]++;reject(error);cov_fglcscg67.s[30]++;return;}cov_fglcscg67.s[31]++;if(info.done){cov_fglcscg67.b[6][0]++;cov_fglcscg67.s[32]++;resolve(value);}else{cov_fglcscg67.b[6][1]++;cov_fglcscg67.s[33]++;return Promise.resolve(value).then(function(value){cov_fglcscg67.f[8]++;cov_fglcscg67.s[34]++;step("next",value);},function(err){cov_fglcscg67.f[9]++;cov_fglcscg67.s[35]++;step("throw",err);});}}cov_fglcscg67.s[36]++;return step("next");});};}function _classCallCheck(instance,Constructor){cov_fglcscg67.f[10]++;cov_fglcscg67.s[37]++;if(!(instance instanceof Constructor)){cov_fglcscg67.b[7][0]++;cov_fglcscg67.s[38]++;throw new TypeError("Cannot call a class as a function");}else{cov_fglcscg67.b[7][1]++;}}var ApplyLoan=(cov_fglcscg67.s[39]++,function(){cov_fglcscg67.f[11]++;function ApplyLoan(){cov_fglcscg67.f[12]++;cov_fglcscg67.s[40]++;_classCallCheck(this,ApplyLoan);}cov_fglcscg67.s[41]++;_createClass(ApplyLoan,[{key:'loanApply',value:function(){cov_fglcscg67.f[13]++;var _ref=(cov_fglcscg67.s[42]++,_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee(req,res){cov_fglcscg67.f[14]++;var schema,result,_req$body,email,tenor,amount,id,interest,paymentInstallment,balance,loan;cov_fglcscg67.s[43]++;return regeneratorRuntime.wrap(function _callee$(_context){cov_fglcscg67.f[15]++;cov_fglcscg67.s[44]++;while(1){cov_fglcscg67.s[45]++;switch(_context.prev=_context.next){case 0:cov_fglcscg67.b[8][0]++;cov_fglcscg67.s[46]++;schema={email:_joi2.default.string().email().required(),tenor:_joi2.default.number().integer().positive().max(12).required(),amount:_joi2.default.number().precision(2).required()};cov_fglcscg67.s[47]++;result=_joi2.default.validate(req.body,schema);cov_fglcscg67.s[48]++;if(!result.error){cov_fglcscg67.b[9][0]++;cov_fglcscg67.s[49]++;_context.next=4;cov_fglcscg67.s[50]++;break;}else{cov_fglcscg67.b[9][1]++;}cov_fglcscg67.s[51]++;return _context.abrupt('return',res.status(400).json(result.error.details[0].message));case 4:cov_fglcscg67.b[8][1]++;cov_fglcscg67.s[52]++;_req$body=req.body,email=_req$body.email,tenor=_req$body.tenor,amount=_req$body.amount;cov_fglcscg67.s[53]++;id=_loanDb2.default.length+1;cov_fglcscg67.s[54]++;interest=0.05*parseInt(amount,10).toFixed(2);cov_fglcscg67.s[55]++;paymentInstallment=(parseInt(amount,10)+parseInt(interest,10)).toFixed(2)/parseInt(tenor,10).toFixed(2);cov_fglcscg67.s[56]++;balance=parseInt(amount,10).toFixed(2);cov_fglcscg67.s[57]++;loan={id:id,email:email,amount:amount,tenor:tenor,paymentInstallment:paymentInstallment,balance:balance,status:'pending',repaid:false,createdOn:(0,_moment2.default)(new Date()).format('YYYY-MM-DD HH:MM:SS')};cov_fglcscg67.s[58]++;if(!_loanDb2.default.find(function(user){cov_fglcscg67.f[16]++;cov_fglcscg67.s[59]++;return user.email===email;})){cov_fglcscg67.b[10][0]++;cov_fglcscg67.s[60]++;_context.next=12;cov_fglcscg67.s[61]++;break;}else{cov_fglcscg67.b[10][1]++;}cov_fglcscg67.s[62]++;return _context.abrupt('return',res.status(409).send({status:409,error:'You have already applied for loan!'}));case 12:cov_fglcscg67.b[8][2]++;cov_fglcscg67.s[63]++;_loanDb2.default.push(loan);cov_fglcscg67.s[64]++;return _context.abrupt('return',res.status(201).json({status:201,message:"loan created successfully",data:loan}));case 14:cov_fglcscg67.b[8][3]++;case'end':cov_fglcscg67.b[8][4]++;cov_fglcscg67.s[65]++;return _context.stop();}}},_callee,this);})));function loanApply(_x,_x2){cov_fglcscg67.f[17]++;cov_fglcscg67.s[66]++;return _ref.apply(this,arguments);}cov_fglcscg67.s[67]++;return loanApply;}()}]);cov_fglcscg67.s[68]++;return ApplyLoan;}());var applyLoan=(cov_fglcscg67.s[69]++,new ApplyLoan());cov_fglcscg67.s[70]++;exports.default=applyLoan;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcGx5TG9hbi5qcyJdLCJuYW1lcyI6WyJBcHBseUxvYW4iLCJyZXEiLCJyZXMiLCJzY2hlbWEiLCJlbWFpbCIsIkpvaSIsInN0cmluZyIsInJlcXVpcmVkIiwidGVub3IiLCJudW1iZXIiLCJpbnRlZ2VyIiwicG9zaXRpdmUiLCJtYXgiLCJhbW91bnQiLCJwcmVjaXNpb24iLCJyZXN1bHQiLCJ2YWxpZGF0ZSIsImJvZHkiLCJlcnJvciIsInN0YXR1cyIsImpzb24iLCJkZXRhaWxzIiwibWVzc2FnZSIsImlkIiwibG9hbkRiIiwibGVuZ3RoIiwiaW50ZXJlc3QiLCJwYXJzZUludCIsInRvRml4ZWQiLCJwYXltZW50SW5zdGFsbG1lbnQiLCJiYWxhbmNlIiwibG9hbiIsInJlcGFpZCIsImNyZWF0ZWRPbiIsIkRhdGUiLCJmb3JtYXQiLCJmaW5kIiwidXNlciIsInNlbmQiLCJwdXNoIiwiZGF0YSIsImFwcGx5TG9hbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7OztBQUNBOzs7O0FBQ0E7Ozs7Ozs7Ozs7SUFFTUEsUzs7Ozs7Ozs7Z0dBQ2NDLEcsRUFBS0MsRzs7Ozs7OztBQUNYQyxzQyxHQUFTO0FBQ1hDLDJDQUFPQyxjQUFJQyxNQUFKLEdBQWFGLEtBQWIsR0FBcUJHLFFBQXJCLEVBREk7QUFFWEMsMkNBQU9ILGNBQUlJLE1BQUosR0FBYUMsT0FBYixHQUF1QkMsUUFBdkIsR0FBa0NDLEdBQWxDLENBQXNDLEVBQXRDLEVBQTBDTCxRQUExQyxFQUZJO0FBR1hNLDRDQUFPUixjQUFJSSxNQUFKLEdBQWFLLFNBQWIsQ0FBdUIsQ0FBdkIsRUFBMEJQLFFBQTFCO0FBSEksaUM7QUFLVFEsc0MsR0FBU1YsY0FBSVcsUUFBSixDQUFhZixJQUFJZ0IsSUFBakIsRUFBdUJkLE1BQXZCLEM7O3FDQUNYWSxPQUFPRyxLOzs7OztpRUFDQWhCLElBQUlpQixNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUJMLE9BQU9HLEtBQVAsQ0FBYUcsT0FBYixDQUFxQixDQUFyQixFQUF3QkMsT0FBN0MsQzs7OzRDQUVrQnJCLElBQUlnQixJLEVBQTFCYixLLGFBQUFBLEssRUFBTUksSyxhQUFBQSxLLEVBQU1LLE0sYUFBQUEsTTtBQUNiVSxrQyxHQUFLQyxpQkFBT0MsTUFBUCxHQUFnQixDO0FBQ3ZCQyx3QyxHQUFXLE9BQU9DLFNBQVNkLE1BQVQsRUFBaUIsRUFBakIsRUFBcUJlLE9BQXJCLENBQTZCLENBQTdCLEM7QUFDaEJDLGtELEdBQXFCLENBQUNGLFNBQVNkLE1BQVQsRUFBZ0IsRUFBaEIsSUFBc0JjLFNBQVNELFFBQVQsRUFBa0IsRUFBbEIsQ0FBdkIsRUFBOENFLE9BQTlDLENBQXNELENBQXRELElBQXlERCxTQUFTbkIsS0FBVCxFQUFlLEVBQWYsRUFBbUJvQixPQUFuQixDQUEyQixDQUEzQixDO0FBQzlFRSx1QyxHQUFVSCxTQUFTZCxNQUFULEVBQWlCLEVBQWpCLEVBQXFCZSxPQUFyQixDQUE2QixDQUE3QixDO0FBQ1ZHLG9DLEdBQU87QUFDVFIsMENBRFM7QUFFVG5CLGdEQUZTO0FBR1RTLGtEQUhTO0FBSVRMLGdEQUpTO0FBS1RxQiwwRUFMUztBQU1UQyxvREFOUztBQU9UWCw0Q0FBUSxTQVBDO0FBUVRhLDRDQUFRLEtBUkM7QUFTVEMsK0NBQVUsc0JBQU8sSUFBSUMsSUFBSixFQUFQLEVBQW1CQyxNQUFuQixDQUEwQixxQkFBMUI7QUFURCxpQzs7cUNBV1ZYLGlCQUFPWSxJQUFQLENBQVk7QUFBQSwyQ0FBUUMsS0FBS2pDLEtBQUwsS0FBZUEsS0FBdkI7QUFBQSxpQ0FBWixDOzs7OztpRUFDUUYsSUFBSWlCLE1BQUosQ0FBVyxHQUFYLEVBQWdCbUIsSUFBaEIsQ0FBcUI7QUFDeEJuQiw0Q0FBUSxHQURnQjtBQUV4QkQsMkNBQU87QUFGaUIsaUNBQXJCLEM7OztBQUtYTSxpREFBT2UsSUFBUCxDQUFZUixJQUFaO2lFQUNPN0IsSUFBSWlCLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUN4QkQsNENBQVEsR0FEZ0I7QUFFeEJHLDZDQUFTLDJCQUZlO0FBR3hCa0IsMENBQU1UO0FBSGtCLGlDQUFyQixDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPZixJQUFNVSxZQUFZLElBQUl6QyxTQUFKLEVBQWxCO2tCQUNleUMsUyIsImZpbGUiOiJhcHBseUxvYW4uanMiLCJzb3VyY2VSb290IjoiL2hvbWUvbmdhYm9ueml6YS9EZXNrdG9wL2NhbXA2L1F1aWNrLWNyZWRpdC9zZXJ2ZXIvY29udHJvbGxlcnMvbG9hbiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBsb2FuRGIgZnJvbSAnLi4vLi4vbW9kZWxzL2xvYW5EYic7XG5pbXBvcnQgSm9pIGZyb20gJ2pvaSc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5cbmNsYXNzIEFwcGx5TG9hbntcbiAgICBhc3luYyBsb2FuQXBwbHkocmVxLCByZXMpIHtcbiAgICAgICAgY29uc3Qgc2NoZW1hID0ge1xuICAgICAgICAgICAgZW1haWw6IEpvaS5zdHJpbmcoKS5lbWFpbCgpLnJlcXVpcmVkKCksXG4gICAgICAgICAgICB0ZW5vcjogSm9pLm51bWJlcigpLmludGVnZXIoKS5wb3NpdGl2ZSgpLm1heCgxMikucmVxdWlyZWQoKSxcbiAgICAgICAgICAgIGFtb3VudDpKb2kubnVtYmVyKCkucHJlY2lzaW9uKDIpLnJlcXVpcmVkKCksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IEpvaS52YWxpZGF0ZShyZXEuYm9keSwgc2NoZW1hKTtcbiAgICAgICAgaWYgKHJlc3VsdC5lcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHJlc3VsdC5lcnJvci5kZXRhaWxzWzBdLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHtlbWFpbCx0ZW5vcixhbW91bnR9ID0gcmVxLmJvZHk7XG4gICAgICAgIGNvbnN0IGlkID0gbG9hbkRiLmxlbmd0aCArIDE7XG4gICAgICBjb25zdCBpbnRlcmVzdCA9IDAuMDUgKiBwYXJzZUludChhbW91bnQsIDEwKS50b0ZpeGVkKDIpO1xuICAgICAgICBjb25zdCBwYXltZW50SW5zdGFsbG1lbnQgPSAocGFyc2VJbnQoYW1vdW50LDEwKSArIHBhcnNlSW50KGludGVyZXN0LDEwKSkudG9GaXhlZCgyKS9wYXJzZUludCh0ZW5vciwxMCkudG9GaXhlZCgyKTsgXG4gICAgICAgIGNvbnN0IGJhbGFuY2UgPSBwYXJzZUludChhbW91bnQsIDEwKS50b0ZpeGVkKDIpO1xuICAgICAgICBjb25zdCBsb2FuID0ge1xuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBlbWFpbCwgIFxuICAgICAgICAgICAgYW1vdW50LFxuICAgICAgICAgICAgdGVub3IsXG4gICAgICAgICAgICBwYXltZW50SW5zdGFsbG1lbnQsXG4gICAgICAgICAgICBiYWxhbmNlLFxuICAgICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgICByZXBhaWQ6IGZhbHNlLFxuICAgICAgICAgICAgY3JlYXRlZE9uOm1vbWVudChuZXcgRGF0ZSgpKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6TU06U1MnKSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYobG9hbkRiLmZpbmQodXNlciA9PiB1c2VyLmVtYWlsID09PSBlbWFpbCkpe1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA5KS5zZW5kKHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDQwOSxcbiAgICAgICAgICAgICAgICBlcnJvcjogJ1lvdSBoYXZlIGFscmVhZHkgYXBwbGllZCBmb3IgbG9hbiEnLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBsb2FuRGIucHVzaChsb2FuKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgICAgICAgIHN0YXR1czogMjAxLFxuICAgICAgICAgICAgbWVzc2FnZTogXCJsb2FuIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XCIsXG4gICAgICAgICAgICBkYXRhOiBsb2FuLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5jb25zdCBhcHBseUxvYW4gPSBuZXcgQXBwbHlMb2FuKCk7XG5leHBvcnQgZGVmYXVsdCBhcHBseUxvYW47Il19